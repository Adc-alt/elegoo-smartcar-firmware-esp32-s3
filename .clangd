CompileFlags:
  # Que use compile_commands.json del proyecto (generado por CMake/PlatformIO, etc.)
  CompilationDatabase: .
  # Remover flags que clang no reconoce pero que son válidos para xtensa-esp32s3-elf-gcc
  # Esto evita que clangd muestre errores por flags desconocidos
  Remove:
    - -mlongcalls
    - -fstrict-volatile-bitfields
    - -fno-tree-switch-conversion
    - -mfix-esp32-psram-cache-issue

Diagnostics:
  # No avises por includes no usados
  UnusedIncludes: None

  # Desactivado porque en Arduino/ESP32 muchos headers vienen de Arduino.h
  MissingIncludes: None

  # Suprimir warnings de conversiones implícitas (int->bool es común en Arduino)
  Suppress:
    - implicit-int-bool-conversion

  # Activar grupos de checks de clang-tidy
  ClangTidy:
    Add: [readability-*, performance-*, modernize-*, bugprone-*]
    Remove:
      - readability-magic-numbers # Que no joda con los números mágicos
      - readability-identifier-length # Que no joda con nombres cortos como 'c', 'i', etc.
      - readability-implicit-bool-conversion # Que no joda con conversiones int->bool (Serial.available(), etc.)
      - bugprone-implicit-widening-of-multiplication-result # Por si acaso
      - cppcoreguidelines-narrowing-conversions # Por si acaso

  # Nota: Suppress solo funciona para clang-tidy, no para errores del compilador
  # Los errores de flags desconocidos se suprimen con --unknown-argument-warning=false
  # en settings.json -> clangd.arguments

Index:
  Background: Build
